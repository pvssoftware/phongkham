{% extends "base.html" %}
{% load staticfiles %}

 {% block content %}


 <div class="container" id="list_patients_finished">
     
    {% include "doctors/doctor_list_patients_finished.html" %}
         
 </div>

 <script src="{% static 'js/channels/reconnecting-websocket.min.js' %}"></script>
 <!-- <script src="{% static 'js/channels/doctors_list_examination.js' %}"></script> -->
 <script>
 $(function(){
    var url = "list-patients-finished";
    endpoint = `wss://healthy-care.vn/ws/${url}` // 1

    var socket =  new ReconnectingWebSocket(endpoint) // 2
    
   // 3
    socket.onopen = function(e){
      console.log("open", e); 
    }
    socket.onmessage = function(e){
      console.log("message", e);
      var patientData = JSON.parse(e.data);
      $("#list_patients_finished").html(patientData.html_patients);
    }
    socket.onerror = function(e){
      console.log("error", e)
    }
    socket.onclose = function(e){
      console.log("close", e)
    }
});
 </script>
<script src="{% static 'js/easy-modal-plugin.js' %}"></script>
<script>
  $(document).ready(function(){
   // modal plugin
   $(function() {
     $(".view-pdf").on("click", function() {
       var pdf_link = $(this).attr("href");
       console.log(pdf_link);
       // var iframe = '<div class="iframe-container"><iframe src="'+pdf_link+'"></iframe></div>'
       // var iframe = '<object data="'+pdf_link+'" type="application/pdf"><embed src="'+pdf_link+'" type="application/pdf" /></object>'
       var iframe =
         '<object type="application/pdf" data="' +
         pdf_link +
         '" width="100%" height="600">No Support</object>';
       $.createModal({
         title: "Xem file",
         message: iframe,
         closeButton: true,
         scrollable: false
       });
       return false;
     });
   }); //end modal
 });// 
 </script>

 {% endblock %}